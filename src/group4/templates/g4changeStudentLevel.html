{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Student Level - ReadingApp</title>
    <link rel="stylesheet" href="{% static 'styles.css'%}">
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo">ReadingApp</div>
            <ul class="nav-links">
                <li><a href="teacher-dashboard.html">Dashboard</a></li>
                <li><a href="{%url 'group4:g4logout'%}">Logout</a></li>
            </ul>
        </div>
    </header>

    <main class="dashboard-container">
        <aside class="student-list">
            <h3>Students</h3>
            <ul id="studentList">
                {% for user in users %}
                    {% if user.type == 1 %}
                        <li onclick="selectStudent(this)">{{ user.name }}</li>
                    {% endif %}
                {% endfor %}
                
            </ul>
        </aside>

        <section class="form-section">
            <h2>Change Student Level</h2>
            <form action="{% url 'group4:g4changeStudentLevel'%}" method="POST">
                {% csrf_token %}
                <div class="form-group">
                    <label for="student-name">Student Username</label>
                    <input type="text" id="student-name" name="student-name" onkeyup="filterStudents()" required>
                </div>
                <div class="form-group">
                    <label for="new-level">New Level</label>
                    <select id="new-level" name="new-level" required>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
                <div class="btn-container">
                    <button type="submit" class="btn">Change Level</button>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <p>Â© 2025 ReadingApp. All rights reserved.</p>
    </footer>

    <script>
        function updateSelectColor() {
            const select = document.getElementById('new-level');
            const selectedValue = select.value;

            if (selectedValue === 'Beginner') {
                select.style.backgroundColor = '#ccffcc';
            } else if (selectedValue === 'Intermediate') {
                select.style.backgroundColor = '#ffffcc';
            } else if (selectedValue === 'Advanced') {
                select.style.backgroundColor = '#ffcccc';
            }
        }

        document.addEventListener('DOMContentLoaded', updateSelectColor);

        function filterStudents() {
            const searchInput = document.getElementById('student-name').value.toLowerCase();
            const studentList = document.getElementById('studentList');
            const students = studentList.getElementsByTagName('li');

            for (let i = 0; i < students.length; i++) {
                const student = students[i].textContent.toLowerCase();
                if (student.includes(searchInput)) {
                    students[i].style.display = '';
                } else {
                    students[i].style.display = 'none';
                }
            }
        }

        function selectStudent(studentElement) {
            const studentName = studentElement.textContent;
            document.getElementById('student-name').value = studentName;
        }
    </script>
</body>
</html>
