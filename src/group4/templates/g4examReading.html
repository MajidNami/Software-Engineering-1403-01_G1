{%load static%}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Test - Exam Mode</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <!-- Header / Navbar -->
    <header>
        <nav class="navbar">
            <div class="logo">ReadingApp</div>
            <ul class="nav-links">
                <li><a href="{%url 'group4:g4redirectToDashboard'%}">Dashboard</a></li>
                <li><a href="{%url 'group4:g4logout'%}">Logout</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <section class="content-section">
        <main class="reading-test-container">
            <h1>Practice Mode: Reading Test</h1>
            <p>This mode allows you to practice without a timer. Read the passage below and answer the questions that follow.</p>
            <form action="{%url 'group4:g4saveResult'%}" method="post">
            {%csrf_token%}
            <!-- Timer Section -->
            <section class="timer">
                <h3>Time Left: <span id="timer">01:10</span></h3>
            </section>

            <!-- Passage Section -->
            <section class="passage">
                <h2>{{title}}</h2>
                <p>
                    {{content}}
                </p>
            </section>

            <!-- Questions Section -->
            <section class="questions">
                <h2>Questions</h2>
                <ul>
                    <li>
                        <p>{{q1body}}</p>
                        <label>
                            <input type="radio" name="q1" value="A"> A) {{q1cans}}
                        </label><br>
                        <label>
                            <input type="radio" name="q1" value="B"> B) {{q1wans1}}
                        </label><br>
                        <label>
                            <input type="radio" name="q1" value="C"> C) {{q1wans2}}
                        </label><br>
                        <label>
                            <input type="radio" name="q1" value="D"> D) {{q1wans3}}
                        </label><br>
                    </li>
                    <li>
                        <p>{{q2body}}</p>
                        <label>
                            <input type="radio" name="q2" value="A"> A) {{q2wans2}}
                        </label><br>
                        <label>
                            <input type="radio" name="q2" value="B"> B) {{q2cans}}
                        </label><br>
                        <label>
                            <input type="radio" name="q2" value="C"> C) {{q2wans1}}
                        </label><br>
                        <label>
                            <input type="radio" name="q2" value="D"> D) {{q2wans3}}
                        </label><br>
                    </li>
                    <li>
                        <p>{{q3body}}</p>
                        <label>
                            <input type="radio" name="q3" value="A"> A) {{q3wans1}}
                        </label><br>
                        <label>
                            <input type="radio" name="q3" value="B"> B)  {{q3wans2}}
                        </label><br>
                        <label>
                            <input type="radio" name="q3" value="C"> C)  {{q3wans3}}
                        </label><br>
                        <label>
                            <input type="radio" name="q3" value="D"> D)  {{q3cans}}
                        </label><br>
                    </li>
                </ul>
            </section>
                
                    <button id="check-answers" type="submit" class="check-btn">Check Answers</button>
                </form>
            <script>
                let timerElement = document.getElementById('timer');
                let checkAnswersButton = document.getElementById('check-answers');

                // Extract time from the timer element
                let timeParts = timerElement.textContent.split(':');
                let timeLeft = parseInt(timeParts[0]) * 60 + parseInt(timeParts[1]); // Convert to seconds

                function updateTimer() {
                    let minutes = Math.floor(timeLeft / 60);
                    let seconds = timeLeft % 60;
                    timerElement.textContent = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        checkAnswersButton.click();
                    } else if (timeLeft <= 5) {
                        timerElement.classList.add('blinking');
                    }

                    timeLeft--;
                }
        
                let timerInterval = setInterval(updateTimer, 1000);
        
                // CSS for blinking effect
                const style = document.createElement('style');
                style.innerHTML = `
                    .blinking {
                        animation: blink 1s step-start 0s infinite;
                    }
                    @keyframes blink {
                        50% { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            </script>

            

        </main>
    </section>

    <!-- Footer -->
    <footer>
        <p>Â© 2025 ReadingApp. All rights reserved.</p>
    </footer>
</body>
</html>
